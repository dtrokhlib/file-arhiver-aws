1. Remove direct use of repositories from controllers and replace them with services
